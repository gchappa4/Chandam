"use strict";define("MiriyamAPI",["ss","MiriyamUtil","MiriyamLib2"],function(n,t,i){function e(){}function f(){}function c(n,t){this.$3=!1,this.$1=n,this.$0=t,this.okText="సరే",this.cancelText="వద్దు",this.id="OLay",this.$3=!0}function o(){}function r(){}function s(){}function u(){}var y=this,h,l,a,v;return e.buildResult=function(t,i,r,u,f){var s=u!=null,o=new n.StringBuilder;return o.appendLine("<div class='padyam'>"),o.appendLine("<div class='chandassu'  title='"+t.get_name()+"'>"+t.get_shortName()+"<\/div>"),o.appendLine("<div class='poem'>"),o.appendLine(i.build2(r)),o.appendLine("<\/div>"),f&&o.append("<div class='open'>[O]<\/div>"),o.appendLine("<\/div>"),f&&(o.append("<div class='ganaVibhajana'>"),o.appendLine(e.buildResult4(t,i,r,u)),o.appendLine("<\/div>")),o.toString2()},e.buildResult4=function(i,r,u){var f=new n.StringBuilder;return u.get_percentage()!==100?(f.appendLine("<div class='err' style='text-align:center;width:100%;'>"+i.get_shortName()),f.appendLine(": <b class='percentage'>"+parseFloat(u.get_percentage().toString()).toFixed()+"%<\/b>("+u.get_score()+"/"+u.get_total()+")"),f.appendLine("<\/div>")):(f.appendLine("<div class='err Green' style='text-align:center;width:100%;'>"),f.appendLine(i.get_shortName()),f.appendLine("<\/div>")),i.get_infiniteLength()?(u.get_percentage()!==100&&(f.appendLine("<div style='float:left;width:50%;margin-right:10px;'><div class='err' style='text-align:right;'>దోషాలు<\/div>"),f.appendLine(u.showErrors(t.OutputFormat.HTML)),f.appendLine("<\/div>")),f.appendLine("<div style='float:left;width:40%;margin-left:10px;'><div class='err'>గణ విభజన<\/div>"),f.appendLine(r.build(u)),f.appendLine("<\/div>")):(f.appendLine("<div style='float:left;width:40%;margin-left:10px;'><div class='err'>గణ విభజన<\/div>"),f.appendLine(r.build(u)),f.appendLine("<\/div>"),u.get_percentage()!==100&&(f.appendLine("<div style='float:left;width:50%;margin-right:10px;'><div class='err' style='text-align:right;'>దోషాలు<\/div>"),f.appendLine(u.showErrors(t.OutputFormat.HTML)),f.appendLine("<\/div>"))),f.toString2()},e.determine=function(n,t){if(n==null||!n.trim().length)return null;var r=u.getOptions(t);return i.Padyam.mostProbable(n,r)},e.buildResult2=function(n,t){var f;if(n==null)return"";var r=n.get_padyam(),i=n.get_matchResult(),u=n.get_rule();return i.get_total()?(f=e.buildResult(u,r,i,n.get_candiates(),t),r=null,i=null,u=null,f):""},e.tryMatch=function(n,i,r){var u=t.Manager.fetchRule(i);return e.tryMatch2(n,u,r)},e.tryMatch2=function(n,t,r){var o,f,s;return n==null||!n.trim().length?"":(o=u.getOptions(r),f=new i.Padyam,f.set_matchYati(o.get_matchYati()),f.set_matchPrasa(o.get_matchPrasa()),f.set_allowSantiPrasa(o.get_allowSantiPrasa()),f.set_sandiMatch(o.get_experimenatalSandhi()),s=f.match(n,t),!s.get_total())?"":e.buildResult(t,f,s,null,r==null?!0:r.showGV)},f.loadExternalRules=function(){if(!n.isValue(Config.ExternalRules)){t.Manager.register([]);return}var r=Config.ExternalRules,i=f.go(r),u=Config.ExternalExamples;debugger;f.$0(i,u),t.Manager.register(i)},f.$0=function(t,i){for(var u=n.enumerate(t),r;u.moveNext();)(r=u.current,i[r.get_identifier()]!=null)&&r.set_examples(i[r.get_identifier()])},f.go=function(i){for(var f=new Array(i.length),o=0,e=n.enumerate(i),r,u;e.moveNext();)r=e.current,u=new t.Rule,u.set_anthyaPrasa(r.anthyaPrasa),u.set_deferThresold(r.deferThresold),u.set_examples(r.examples),u.set_frequency(r.frequency),u.set_identifier(r.identifier),u.set_infiniteLength(r.infiniteLength),u.set_language(r.language==null?t.RuleLanguage.telugu:r.language),u.set_lines(r.lines),u.set_name(r.name),u.set_onlyPrasaYati(r.onlyPrasaYati),u.set_padyamSubType(r.padyamSubType),u.set_padyamType(r.padyamType),u.set_prasa(r.prasa),u.set_prasaYati(r.prasaYati),u.set_references(r.references),u.set_ruleText(r.ruleText),u.set_rules(r.rules),u.set_reverseYati(r.reverseYati),u.set_ruleType(r.ruleType),u.set_threshold(r.threshold),u.set_yati(r.yati==null?[]:r.yati),u.set_yatiMode(r.yatiMode),u.set_yatiRecycle(r.yatiRecycle),f[o++]=u;return f},f.defaultOptions=function(){var n={};return n.AllowSantiPrasa=!0,n.ExperimenatalSandhi=!0,n.IncludeRare=!0,n.Language=t.RuleLanguage.telugu,n.MatchPrasa=!0,n.MatchYati=!0,n.QuickMatch=!0,n.ShowGV=!1,n},f.mapOptions=function(n){if(n==null)return null;var r=new i.MatchOptions;return r.set_allowSantiPrasa(f.$1(n.allowSantiPrasa)),r.set_experimenatalSandhi(f.$1(n.experimenatalSandhi)),r.set_includeRare(f.$1(n.includeRare)),r.set_language(n.language==null?t.RuleLanguage.telugu:n.language),r.set_matchPrasa(f.$1(n.matchPrasa)),r.set_matchYati(f.$1(n.matchYati)),r.set_quickMatch(f.$1(n.quickMatch)),r},f.$1=function(n){return n==null?!0:n},h={},l={get_showClose:function(){return this.$3},set_showClose:function(n){return this.$3=n,n},get_footerText:function(){return this.$4},set_footerText:function(n){return this.$4=n,n},get_id:function(){return this.id},set_id:function(n){return this.id=n,n},get_innerElement:function(){return this.$2},set_innerElement:function(n){return this.$2=n,n},show:function(){var a=this,c=document.createElement("div"),f,i,e,o,l,s,h,u,t;c.className="oFContent",!this.get_content()||(c.innerHTML=this.$0),this.$2!=null&&(c.appendChild(document.createElement("br")),c.appendChild(this.$2)),f=null,!this.get_title()||(f=document.createElement("h1"),f.className="oFTitle",f.innerHTML=this.get_title()),i=null,this.get_showClose()&&(i=document.createElement("input"),i.className="actions",i.setAttribute("type","button"),i.setAttribute("value",this.cancelText),r.registerEvent2(i,"click",function(){a.close()})),e=document.createElement("input"),e.className="actions",e.setAttribute("type","button"),e.setAttribute("value",this.okText),r.registerEvent2(e,"click",n.bind("onOK",this)),o=document.createElement("div"),o.className="oFButtonHolder",this.get_footerText()!=null&&(l=document.createElement("span"),l.innerHTML=this.get_footerText(),o.appendChild(l)),o.appendChild(e),i!=null&&o.appendChild(i),s=null,this.get_showClose()&&(h=document.createElement("h1"),h.innerHTML="X",h.title=this.cancelText,h.id=this.id+"Close",r.registerEvent2(h,"click",function(){a.close()}),s=document.createElement("div"),s.className="oFCloseButtonHolder",s.appendChild(h)),u=document.getElementById(this.get_$5()),u==null&&(u=document.createElement("div"),u.className="oBackGround",u.id=this.get_$5(),document.body.appendChild(u)),u.style.visibility=u.style.visibility==="visible"?"hidden":"visible",t=document.getElementById(this.get_$6()),t==null&&(t=document.createElement("div"),t.className="oForeGround",t.id=this.get_$6(),document.body.appendChild(t)),t.style.visibility=t.style.visibility==="visible"?"hidden":"visible",f!=null&&t.appendChild(f),s!=null&&t.appendChild(s),t.appendChild(c),t.appendChild(o),this.postLoadCallback!=null&&this.postLoadCallback()},get_$5:function(){return this.id+"_oBackGround"},get_$6:function(){return this.id+"_oForeGround"},get_title:function(){return this.$1==null?"":this.$1},set_title:function(n){return this.$1=n,n},get_content:function(){return this.$0==null?"":this.$0},set_content:function(n){return this.$0=n,n},onOK:function(){var n=this.preOKCallBack==null?!0:this.preOKCallBack();n&&(this.close(),this.postOKCallBack!=null&&this.postOKCallBack())},close:function(){var t=document.getElementById(this.get_$6()),n;t.style.visibility=t.style.visibility==="visible"?"hidden":"visible",t.innerHTML="",n=document.getElementById(this.get_$5()),n.style.visibility=n.style.visibility==="visible"?"hidden":"visible",n.innerHTML=""}},r.isChecked=function(n){return document.getElementById(n)==null?!1:document.getElementById(n).checked},r.getValue=function(n){return document.getElementById(n)==null?"":document.getElementById(n).value.toString()},r.setChecked=function(n){document.getElementById(n)!=null&&(document.getElementById(n).checked=!0)},r.setValue=function(n,t){document.getElementById(n)!=null&&(document.getElementById(n).value=t)},r.addOptionItem=function(n,t,i){var r=window.document.createElement(i?"optgroup":"option");return i||(r.innerHTML=n),r.setAttribute(i?"label":"value",t),r},r.setOption=function(n,t){for(var e=document.getElementById(n),i,f,r,u=0;u<e.children.length;u++)if(i=e.children[u],i.tagName.toLowerCase()==="optgroup")for(f=0;f<i.children.length;f++)r=i.children[f],r.value===t?(r.setAttribute("selected","selected"),r.selected=!0):r.attributes.getNamedItem("selected")!=null&&r.attributes.getNamedItem("selected").value==="selected"&&(r.removeAttribute("selected"),r.selected=!1);else i.value===t?(i.setAttribute("selected","selected"),i.selected=!0):i.attributes.getNamedItem("selected")!=null&&i.attributes.getNamedItem("selected").value==="selected"&&(i.removeAttribute("selected"),i.selected=!1)},r.selectedValue=function(n){var t=window.document.getElementById(n);return t.selectedIndex==-1?null:t.options[t.selectedIndex].value},r.setUnChecked=function(n){document.getElementById(n)!=null&&(document.getElementById(n).checked=!1)},r.registerEvent=function(n,t,i){r.registerEvent2(document.getElementById(n),t,i)},r.registerClick=function(n,t){r.registerEvent2(document.getElementById(n),"click",t)},r.registerClick2=function(t,i){for(var u=n.enumerate(t),f;u.moveNext();)f=u.current,r.registerEvent2(document.getElementById(f),"click",i)},r.findByClass=function(n,t){for(var e=n.children,u,f,i=0;i<e.length;i++){if(u=e[i],u.className===t)return u;if(f=r.findByClass(u,t),f!=null)return f}return null},r.registerClick3=function(n,t){r.registerEvent2(n,"click",t)},r.registerChange=function(n,t){r.registerEvent2(document.getElementById(n),"change",t)},r.registerEvent2=function(n,t,i){if(n!=null)try{n.addEventListener!=null?n.addEventListener(t,i,!1):n.attachEvent("oneventName",i)}catch(r){n.attachEvent("oneventName",i)}},r.$0=function(n){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()},r.findQuery=function(n){try{var t=r.buildQuery();return t[n]}catch(i){return""}},r.buildQuery=function(){for(var f=window.location.search.substring(1),e=f.split("&"),i={},r=n.enumerate(e),u,t;r.moveNext();)u=r.current,t=u.split("="),!t[0]||(i[t[0]]=t[1]);return i},r.$1=function(n){return new RegExp(s.email).test(n)},r.$2=function(n){var t=window.document.getElementById(n);t!=null&&(t.style.visibility="visible")},r.$3=function(n){var t=window.document.getElementById(n);t!=null&&(t.style.display="block")},r.$4=function(n){var t=window.document.getElementById(n);t!=null&&(t.style.display="none")},r.$5=function(n){return window.document.getElementById(n)!=null},r.$6=function(n,t){r.$5(n)&&(document.getElementById(n).className=t)},r.$7=function(n){r.$5(n)&&(window.document.getElementById("tc").style.visibility="hidden")},r.scrollTo=function(n){if(r.$5(n))try{window.document.getElementById(n).scrollIntoView()}catch(t){}},r.noTags=function(t){return n.replaceString(n.replaceString(n.replaceString(n.replaceString(n.replaceString(n.replaceString(t.toLowerCase(),"<u>",""),"<\/u>",""),"<b>",""),"<i>",""),"<\/b>",""),"<\/i>","")},r.setFocus=function(n){document.getElementById(n)!=null&&document.getElementById(n).focus()},r.setCheckedValue=function(n,t){t?r.setChecked(n):r.setUnChecked(n)},a={},u.beautifyAll=function(n,t,i){var e=t==null?document.getElementsByTagName("*"):t.getElementsByTagName("*"),o,r;if(e!=null){for(o=new Array(e.length),r=0;r<e.length;r++)o[r]=e[r];for(i==null&&(i=f.defaultOptions(),i.showGV=!0),r=0;r<o.length;r++){var s=o[r],c=s.getAttribute("chandam"),h=s.getAttribute("chandassu");c!=="0"&&(c!=="1"&&!h||(h==null||!h?u.beautify(s,n,i):u.beautify(s,h,i)))}}},u.beautifyId=function(n,t,i){u.beautify(document.getElementById(n),t,i)},u.beautifyTags=function(t,i,r){for(var o=document.getElementsByTagName(t),c=new Array(o.length),s,h,e=0;e<o.length;e++)c[e]=o[e];for(r==null&&(r=f.defaultOptions(),r.showGV=!0),s=n.enumerate(c);s.moveNext();){if(h=s.current,h.tagName.toLowerCase()==="div")return;u.beautify(h,i,r)}},u.beautify=function(n,t,i){var o,e,s;n!=null&&t!=="ignore"&&(u.$1(),o=u.$2(n.innerHTML.toUpperCase()),e="",i==null&&(i=f.defaultOptions()),e=t==null||!t?u.determine(o,i):u.$0(o,t,i),!e||(n.innerHTML="<div class='formatted'>"+e+"<\/div><div class='orginal'>"+n.innerHTML+"<\/div>"),s=r.findByClass(n,"open"),s!=null)&&r.registerClick3(s,function(n){var i=n.target.parentNode.parentNode,u=r.findByClass(i,"ganaVibhajana"),t=new c("",u.innerHTML);t.set_footerText("ఛందం<sup class='copyright'>©<\/sup> తో పద్యసాహిత్యం మరింత రసమయం..!! [<a target='_blank' href='http://chandam.apphb.com'>http://chandam.apphb.com<\/a>]"),t.set_showClose(!1),t.show()})},u.$0=function(n,t,i){return e.tryMatch(n,t,i)},u.getOptions=function(n){return n==null?u.$3():f.mapOptions(n)},u.determine=function(n,t){var i=e.determine(n,t);return e.buildResult2(i,t==null?!0:t.showGV)},u.$1=function(){Config.Loaded!=null&&Config.Loaded||(f.loadExternalRules(),Config.Loaded=!0)},u.$2=function(t){var i,r,u,f;for(t=n.replaceString(t,"&nbsp;"," "),t=n.replaceString(t,"\t"," "),i=new RegExp("<(.*?)/>","mig"),t=t.replace(i,"\n"),i=new RegExp("<(.*?)>","mig"),t=t.replace(i,"\n"),t=n.replaceString(n.replaceString(n.replaceString(t,"<BR>","\n"),"<BR />","\n"),"\n\n","\n");t.indexOf("\n\n")!==-1;)t=n.replaceString(t,"\n\n","\n");for(r=new n.StringBuilder,u=n.enumerate(t.split("\n"));u.moveNext();)f=u.current,f.trim().length>0&&r.appendLine(f);return r.toString2()},u.$3=function(){var n=new i.MatchOptions;return n.set_matchYati(!0),n.set_matchPrasa(!0),n.set_allowSantiPrasa(!0),n.set_quickMatch(!0),n.set_experimenatalSandhi(!0),n.set_language(t.RuleLanguage.telugu),n},v=n.module("MiriyamAPI",null,{Business:[e,null,null],MapRules:[f,h,null],OverlayDialog:[c,l,null],Events:[o,null,null],Util:[r,null,null],Patterns:[s,a,null],Worker:[u,null,null]}),o.click="click",o.change="change",s.email=/^[a-zA-Z_\.]+?@[a-zA-Z_\.]+?\.[a-zA-Z]{2,3}$/,v})